{% load roles %}
{% user_has_role request 'editor' as user_is_editor %}
<div class="large-6 columns">
    <div class="box">
            <div class="title-area">
                <h2>{{ title }}</h2>
            </div>
            <div class="content">
                <table class="small scroll">
                    <tr style="text-align: left">
                        <th>Label</th>
                        <th width="25%">Filename</th>
                        <th>Type</th>
                        <th>Download</th>
                        {% if object_mode == "galley" %}
                          <th>Replace</th>
                        {% endif %}
                        <th>Delete</th>
                    </tr>
                    {% for file in files %}
                        <tr>
                            <td>{{ file.label }}</td>
                            <td>{{ file.original_filename|truncatechars:40 }}</td>
                            <td>{{ object_name|title }}</td>
                            {% if object_mode == "galley" %}
                              <td><a href="{% url 'journal_issue_download_galley' issue.pk file.galley.pk %}"><i class="fa fa-download">&nbsp;</i></a></td>
                            {% else %}
                              <td><a href="{% url 'journal_issue_download_document' issue.pk file.pk %}"><i class="fa fa-download">&nbsp;</i></a></td>
                            {% endif %}
                            {% if object_mode == "galley" %}
                              <td><a data-open="uploadbox"><i class="fa fa-cloud-upload">&nbsp;</i></a></td>
                            {% endif %}
                            <td>
                            <form id="delete-galley" method="POST" enctype="multipart/form-data" action="{% url 'issue_galley' issue.pk file.pk object_mode %}">
                                {% csrf_token %}
                                <input type="hidden" name="delete" value="true" />
                                <a onclick="document.getElementById('delete-galley').submit()" >
                                    <i class="fa fa-trash">&nbsp;</i>
                                </a>
                            </form>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="9">No {{ object_name }} have been uploaded.</td>
                        </tr>
                    {% endfor %}
                </table>
                {% if not files or object_mode == "document" %}
                 <a class="button success" data-open="uploadbox"><i class="fa fa-cloud-upload">&nbsp;</i>Upload a new {{ object_name }}</a>
                {% endif %}
            </div>
    </div>
    {% include "elements/issue/new_galley.html" with form=galley_form object_mode=object_mode object_name=object_name %}
</div>
