{% load static %}
{% load foundation %}
{% load i18n %}
<table id="publisher_notes_list" class="scroll">
    <thead>
        <tr>
            <th>Date</th>
            <th>Creator</th>
            <th>Note</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
    </thead>
    <tbody id="sortable">
    {% for note in article.publisher_notes.all %}
            <tr id="note-{{ note.pk }}">
                <td>{{ note.date_time|date:"Y-m-d" }}</td>
                <td>{{ note.creator.full_name }}</td>
                <td>{{ note.text|safe }}</td>
                <td>
                  <a
                    class="button secondary small no-bottom-margin"
                    href="#"
                    data-open="notemodaledit-{{ note.id }}">
                    <i class="fa fa-edit">&nbsp;</i>
                    Edit
                  </a>
                </td>
                <td>
                    <form method="POST">
                        {% csrf_token %}
                      {% with name="delete_note" value=note.pk size="small" %}
                        {% include "elements/button_delete.html" %}
                      {% endwith %}
                    </form>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<div class="medium reveal" id="notemodaladd" data-reveal>
        <small>{% include "admin/elements/forms/errors.html" with form=newnote_form %}</small>
        <h3>{% trans "Add A Publisher Note" %}</h3>
        <form method="POST">
            {% csrf_token %}
            <div class="row">
                <div class="large-12 columns end">
                    {{ newnote_form.text|foundation }}
                </div>
            </div>

          {% with name="add_publisher_note" %}
            {% include "elements/button_save.html" %}
          {% endwith %}
            <button class="close-button" data-close aria-label="Close reveal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
</div>

{% for note_form in note_forms %}
    <div class="medium reveal" id="notemodaledit-{{ note_form.instance.id }}" data-reveal>
        <small>{% include "admin/elements/forms/errors.html" with form=note_form %}</small>
        <h3>{% trans "Edit A Publisher Note" %}</h3>
        <form method="POST">
            {% csrf_token %}
            <div class="row">
                <div class="large-12 columns end">
                    {{ note_form.text|foundation }}
                </div>
            </div>

          {% with name="save_publisher_note" value=note_form.instance.pk %}
            {% include "elements/button_save.html" %}
          {% endwith %}
            <button class="close-button" data-close aria-label="Close reveal" type="button">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
</div>
{% endfor %}
